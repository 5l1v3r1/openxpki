<%args>
    $revocation => 0
</%args>
% if (! $revocation) {
<h1>
  <% i18nGettext('I18N_OPENXPKI_CLIENT_HTML_MASON_API_CERT_SEARCH_TITLE') %>
</h1>
<p>
  <% i18nGettext('I18N_OPENXPKI_CLIENT_HTML_MASON_API_CERT_SEARCH_DESCRIPTION') %>
</p>
% }

<& /service/open_form.mhtml, action => $context->{menu}->get_root().'/service/api/cert_list.html' &>

<& /lib/html/hidden.mhtml, name => 'revocation', value => $revocation &>
<table>
  <tr>
    <td><% i18nGettext('I18N_OPENXPKI_CERT_SEARCH_SUBJECT') %></td>
    <td><& /lib/html/input.mhtml, name => 'subject' &>
  </tr>
  <tr>
    <td><% i18nGettext('I18N_OPENXPKI_CERT_SEARCH_CERT_SERIAL') %></td>
    <td><& /lib/html/input.mhtml, name => 'cert_serial' &>
  </tr>
</table>

<& /service/send_form.mhtml &>
<& /service/close_form.mhtml &>

<& /service/create_csr/print_descriptions.mhtml, 'descriptions' => \@descriptions &>

<%init>
    my @descriptions = ();
    my @raw = ("SUBJECT", "CERT_SERIAL");

    foreach my $key (@raw)
    {
        my $label = "I18N_OPENXPKI_CERT_SEARCH_".uc($key);
        push @descriptions, [ 
            i18nGettext($label),
            i18nGettext($label . '_DESCRIPTION'),
        ];
    }
</%init>

<%once>
    ## fields for i18n scan

    ## I18N_OPENXPKI_CERT_SEARCH_SUBJECT
    ## I18N_OPENXPKI_CERT_SEARCH_SUBJECT_DESCRIPTION

    ## I18N_OPENXPKI_CERT_SEARCH_EMAIL
    ## I18N_OPENXPKI_CERT_SEARCH_EMAIL_DESCRIPTION

    ## I18N_OPENXPKI_CERT_SEARCH_ISSUER
    ## I18N_OPENXPKI_CERT_SEARCH_ISSUER_DESCRIPTION

    ## I18N_OPENXPKI_CERT_SEARCH_CERT_SERIAL
    ## I18N_OPENXPKI_CERT_SEARCH_CERT_SERIAL_DESCRIPTION

    ## I18N_OPENXPKI_CERT_SEARCH_CSR_SERIAL
    ## I18N_OPENXPKI_CERT_SEARCH_CSR_SERIAL_DESCRIPTION

</%once>
