<h1>
  <% i18nGettext('I18N_OPENXPKI_CLIENT_HTML_MASON_CA_ISSUER_LIST_TITLE') %>
</h1>
<p>
  <% i18nGettext('I18N_OPENXPKI_CLIENT_HTML_MASON_CA_ISSUER_LIST_DESCRIPTION') %>
</p>
<table>
  <tr>
    <th><% i18nGettext('I18N_OPENXPKI_CA_ID') %></th>
    <th><% i18nGettext('I18N_OPENXPKI_CA_STATUS') %></th>
    <th><% i18nGettext('I18N_OPENXPKI_CA_NOTBEFORE') %></th>
    <th><% i18nGettext('I18N_OPENXPKI_CA_NOTAFTER') %></th>
    <th><% i18nGettext('I18N_OPENXPKI_CA_CHAIN') %></th>
  </tr>
<%perl>
  foreach my $ca (sort keys %{$list})
  {
    print "  <tr>\n";
    print "    <td>\n";
</%perl>
        <& /lib/html/a.mhtml,
           'target' => "ca_cert.html",
           'params' => [["identifier", $list->{$ca}->{'identifier'}]],
           'label'  => $ca &>
<%perl>
    print "    </td>\n";
    print "    <td>\n";
    if ($list->{$ca}->{'status'})
    {
        print "      ".i18nGettext('I18N_OPENXPKI_CA_STATUS_USABLE')."\n";
    } else {
        print "      ".i18nGettext('I18N_OPENXPKI_CA_STATUS_UNUSABLE')."\n";
    }
    print "    </td>\n";
    print "    <td>\n";
    print "      ".$list->{$ca}->{'notbefore'}."\n";
    print "    </td>\n";
    print "    <td>\n";
    print "      ".$list->{$ca}->{'notafter'}."\n";
    print "    </td>\n";
    print "    <td>\n";
</%perl>
        <& /lib/html/a.mhtml,
           'target' => "chain_list.html",
           'params' => [["identifier", $list->{$ca}->{'identifier'}]],
           'label'  => $ca &>
<%perl>
    print "    </td>\n";
  }
</%perl>
</table>
<%init>
  my $msg  = $context->{client}->send_receive_command_msg ("get_ca_list");
  my $list = $msg->{PARAMS};
</%init>
