<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 3. Quickstart</title><link rel="stylesheet" href="default.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.71.0"><link rel="start" href="index.html" title="OpenXPKI Manual"><link rel="up" href="index.html" title="OpenXPKI Manual"><link rel="prev" href="ch02s03.html" title="Overview"><link rel="next" href="ch03s02.html" title="Configuration"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 3. Quickstart</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s03.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch03s02.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="quickstart"></a>Chapter 3. Quickstart</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="ch03.html#qs_installation">Installation</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03.html#compilation">Compilation and Module installation</a></span></dt><dt><span class="sect2"><a href="ch03.html#qs_installation_initial">Initial (pre-deployment) configuration</a></span></dt><dt><span class="sect2"><a href="ch03.html#qs_installation_deployment">Deployment</a></span></dt><dt><span class="sect2"><a href="ch03.html#qs_installation_webinterface">Setting up the web interface</a></span></dt><dt><span class="sect2"><a href="ch03.html#qs_installation_ca_certificate">Setting up the CA certificate and key</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch03s02.html">Configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03s02.html#qs_configuration_meta">Meta-Configuration</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch03s03.html">Administration</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03s03.html#qs_administration_pkirealm">PKI Realm Setup</a></span></dt><dt><span class="sect2"><a href="ch03s03.html#qs_administration_user">User Administration</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch03s04.html">Running OpenXPKI</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03s04.html#qs_running_server">Server startup</a></span></dt><dt><span class="sect2"><a href="ch03s04.html#qs_running_client">Client test</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="qs_installation"></a>Installation</h2></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="compilation"></a>Compilation and Module installation</h3></div></div></div><p>Assuming you've gotten a source tree from somewhere (i.e. either an official release tar-ball or a Subversion checkout), enter the <code class="filename">trunk/perl-modules/core/trunk</code> directory. Run <span><strong class="command">perl Makefile.PL</strong></span> to create a Makefile. If this should fail, please make sure that you have installed all required Perl modules. If you don't, you can install them using either software packages from your distribution or by using the CPAN shell. If it works, you can compile <span class="application">OpenXPKI</span> using <span><strong class="command">make</strong></span>. Once that is taken care of, make sure to run <span><strong class="command">make test</strong></span> to see if the compiled <span class="application">OpenXPKI</span> runs correctly. <span><strong class="command">make install</strong></span> completes the installation of the Perl modules. Note that if you want to install <span class="application">OpenXPKI</span> locally, i.e. into your home directory, you can run <span><strong class="command">perl Makefile.PL PREFIX=<em class="replaceable"><code>directory</code></em></strong></span> in the first step to prepare for an installation below <em class="replaceable"><code>directory</code></em>.
    </p><p>Now you have all the required modules for the server installed. As the administrative tools use code of the <span class="application">OpenXPKI</span> client as well, you need to install the corresponding modules, too. They come in handy later on when you want to set up a client (such as the Mason-based web interface) as well. Change to the <code class="filename">trunk/clients/perl/OpenXPKI-Client</code> directory and repeat the same steps as above, again using <span><strong class="command">perl Makefile.PL PREFIX=<em class="replaceable"><code>directory</code></em></strong></span> if necessary.
   </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="qs_installation_initial"></a>Initial (pre-deployment) configuration</h3></div></div></div><p>Before being able to run the server, the administrative tools and the (base) configuration have to be deployed. To install them, change into the <code class="filename">trunk/deployment</code> directory. Run <span><strong class="command">./configure</strong></span>, or (if you want to install into a local directory) <span><strong class="command">./configure --prefix <em class="replaceable"><code>directory</code></em></strong></span>. Then, run <span><strong class="command">make</strong></span> and <span><strong class="command">make install</strong></span> to install the tools.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="qs_installation_deployment"></a>Deployment</h3></div></div></div><p>To install the meta configuration file (<code class="filename">openxpki.conf</code>), run <span><strong class="command">openxpkiadm deploy --template quickstart</strong></span>. Follow the instructions and run <span><strong class="command">openxpki-configure</strong></span>. This is an interactive tool that allows you to specify some of the basic configuration options. The most important options that you need to set right now are the location of your openssl binary (defaults to <code class="filename">/usr/bin/openssl</code>) and your database configuration. Exit the tool and allow it to write the modified configuration. Depending on the deployment style, you now have one huge <code class="filename">config.xml</code> or a number of smaller XML files in your <code class="filename">etc/openxpki</code> directory. These are the files that are actually used by the OpenXPKI server and which you can modify later to set up your desired behaviour. After having set up a database using your favourite tool for your favourite DBMS, you should run <span><strong class="command">openxpkiadm initdb</strong></span> to set up the database schema. If everything goes right, try to start the <span class="application">OpenXPKI</span> server using <span><strong class="command">openxpkictl start</strong></span>. If you see &#8220;<span class="quote">DONE.</span>&#8221; in the last line of output, this works and the <span class="application">OpenXPKI</span> server is up and running. Stop it for now using <span><strong class="command">openxpkictl stop</strong></span>. If it goes wrong, please check your <code class="envar">PERL5LIB</code> environment variable. This variable needs to include the location where your Perl modules where installed (which depends on your <code class="envar">PREFIX</code> setting).</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="qs_installation_webinterface"></a>Setting up the web interface</h3></div></div></div><p>So now you've got a working server, but of course you can not see very much of it, which is why the installation of the web interface will be the next step. Change into the <code class="filename">trunk/clients/perl/OpenXPKI-Client-HTML-Mason</code> directory and run <span><strong class="command">perl Makefile.PL</strong></span> (again adding the PREFIX option if necessary), <span><strong class="command">make</strong></span> and <span><strong class="command">make install</strong></span>. This installs the needed client modules. In the next step, copy the <code class="filename">htdocs</code> directory to a path of your liking that is readable by your webserver. We will refer to this directory as the (Mason) component root later on.</p><p>For the rest of this section, we assume you are using Apache as your webserver. Installation under different webservers is possible, but you are largely on your own here. There are two different options how to install the <span class="application">OpenXPKI</span> Mason client &#8211; either using mod_perl or using CGI. If you have mod_perl available, go for it, as it is much faster than using CGI. CGI is not recommend for production use, but to quickly try out <span class="application">OpenXPKI</span>, it works.</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="qs_installation_webinterface_mod_perl"></a>Installing using mod_perl</h4></div></div></div><p>Use the <code class="filename">eg/openxpki-mason-mod_perl.conf</code> file as a boilerplate for your Apache configuration. You need to change four variables defined in this file. The first one is the <code class="envar">MasonDataDir</code> variable, which should point to a directory that is writable by your webserver user. This is a directory where Mason temporarily caches its components. The second one is the <code class="envar">MasonCompRoot</code> variable, which should point to the component root that you chose earlier. Furthermore, you need to set up <code class="envar">OPENXPKI_SOCKET_FILE</code> to point to your <span class="application">OpenXPKI</span> socket file. Note that this file needs to be readable and writable by both your <span class="application">OpenXPKI</span> user as well as the webserver user &#8211; the easiest way to achieve this is putting them in a common group. You can look up the location of the socket file in your <code class="filename">config.xml</code>. The last variable is <code class="envar">OPENXPKI_LOCALE_PREFIX</code>, which needs to point to your <code class="filename">locale</code> directory if you have installed it in a non-standard path.</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="qs_installation_ca_certificate"></a>Setting up the CA certificate and key</h3></div></div></div><p></p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s03.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch03s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Overview </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Configuration</td></tr></table></div></body></html>
